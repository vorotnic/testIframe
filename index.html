<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Embedded Form</title>
</head>
<body>

  <form id="myForm">
    <!-- Hidden field for the email -->
    <input type="hidden" name="email" value="">

    <!-- Other form fields -->
    <input type="text" name="firstName" placeholder="First Name">
    <input type="text" name="lastName" placeholder="Last Name">
    <button type="submit">Submit</button>
  </form>

  <script>
    const allowedOrigin = '*'; 
    window.addEventListener('message', (event) => {
      if (event.origin !== allowedOrigin) {
        console.warn('Unauthorized message origin:', event.origin);
        return;
      }

      const email = event.data?.email;
      if (!email) {
        console.warn('No email provided in postMessage event');
        return;
      }

      const hiddenEmailField = document.querySelector('input[name="email"]');
      if (hiddenEmailField) {
        hiddenEmailField.value = email;
        console.log('Email populated:', email);
      }
    });
  </script>

</body>
</html>
